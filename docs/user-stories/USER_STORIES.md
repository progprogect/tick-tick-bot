# User Stories
## Telegram Bot для управления TickTick

**Версия:** 1.0  
**Дата:** 2024-11-04

---

## Легенда
- **US-XX**: Уникальный идентификатор User Story
- **Приоритет**: High / Medium / Low
- **Оценка**: Story Points (если применимо)

---

## Epic 1: Управление задачами

### US-1: Создание задачи через голос
**Как** пользователь TickTick  
**Я хочу** создавать задачи голосовым сообщением  
**Чтобы** не тратить время на набор текста

**Приоритет**: High  
**Критерии приемки**:
- Пользователь отправляет голосовое сообщение в бот
- Бот распознает речь и конвертирует в текст
- GPT определяет, что это команда создания задачи
- Задача создается в TickTick
- Бот подтверждает создание задачи

**Зависимости**: US-10, US-11

---

### US-2: Создание задачи через текст
**Как** пользователь TickTick  
**Я хочу** создавать задачи текстовым сообщением  
**Чтобы** быстро добавлять задачи в любой момент

**Приоритет**: High  
**Критерии приемки**:
- Пользователь отправляет текстовое сообщение с описанием задачи
- GPT определяет, что это команда создания задачи
- Задача создается в TickTick с корректными параметрами
- Бот подтверждает создание задачи

**Зависимости**: US-11

---

### US-3: Редактирование задачи
**Как** пользователь TickTick  
**Я хочу** редактировать существующие задачи через бота  
**Чтобы** быстро вносить изменения без открытия приложения

**Приоритет**: High  
**Критерии приемки**:
- Пользователь указывает задачу и новые параметры
- GPT определяет, какие параметры нужно изменить
- Задача обновляется в TickTick
- Бот подтверждает изменения

**Зависимости**: US-1, US-11

---

### US-4: Удаление задачи
**Как** пользователь TickTick  
**Я хочу** удалять задачи через бота  
**Чтобы** быстро очищать список выполненных задач

**Приоритет**: High  
**Критерии приемки**:
- Пользователь указывает задачу для удаления
- GPT определяет задачу для удаления
- Задача удаляется в TickTick
- Бот подтверждает удаление

**Зависимости**: US-1, US-11

---

### US-5: Массовый перенос просроченных задач
**Как** пользователь TickTick  
**Я хочу** переносить все просроченные задачи со вчера на сегодня одной командой  
**Чтобы** быстро наводить порядок в задачах

**Приоритет**: High  
**Критерии приемки**:
- Пользователь дает команду "перенеси все просроченные задачи со вчера на сегодня"
- GPT определяет список просроченных задач
- Все задачи переносятся на сегодня
- Бот подтверждает количество перенесенных задач

**Зависимости**: US-1, US-11

---

### US-6: Перенос задач между списками
**Как** пользователь TickTick  
**Я хочу** переносить задачи между списками  
**Чтобы** организовывать задачи по категориям

**Приоритет**: Medium  
**Критерии приемки**:
- Пользователь указывает задачу и целевой список
- GPT определяет задачу и список
- Задача переносится в новый список
- Бот подтверждает перенос

**Зависимости**: US-1, US-11

---

### US-7: Добавление тегов к задачам
**Как** пользователь TickTick  
**Я хочу** добавлять теги к задачам  
**Чтобы** категоризировать и фильтровать задачи

**Приоритет**: Medium  
**Критерии приемки**:
- Пользователь указывает задачу и теги
- GPT определяет задачу и теги для добавления
- Теги добавляются к задаче в TickTick
- Бот подтверждает добавление тегов

**Зависимости**: US-1, US-11

---

### US-8: Массовое добавление тегов с определением срочности
**Как** пользователь TickTick  
**Я хочу** добавлять теги срочности ко всем задачам из списка, чтобы GPT сам определил приоритеты на основе целей недели  
**Чтобы** автоматически расставлять приоритеты

**Приоритет**: Medium  
**Критерии приемки**:
- Пользователь дает команду "добавь ко всем задачам из списка A теги срочности. Определи сам, что наиболее срочно, на основе целей недели"
- GPT анализирует задачи и цели недели
- GPT определяет уровни срочности для каждой задачи
- Теги срочности добавляются к задачам
- Бот подтверждает добавление тегов

**Зависимости**: US-1, US-7, US-11

---

### US-9: Добавление заметок к задачам
**Как** пользователь TickTick  
**Я хочу** добавлять заметки к задачам  
**Чтобы** сохранять дополнительную информацию

**Приоритет**: Medium  
**Критерии приемки**:
- Пользователь указывает задачу и текст заметки
- GPT определяет задачу и заметку
- Заметка добавляется к задаче в TickTick
- Бот подтверждает добавление заметки

**Зависимости**: US-1, US-11

---

### US-10: Создание повторяющихся задач
**Как** пользователь TickTick  
**Я хочу** создавать повторяющиеся задачи (ежедневно/еженедельно)  
**Чтобы** не создавать их вручную каждый раз

**Приоритет**: Medium  
**Критерии приемки**:
- Пользователь указывает задачу и тип повторения
- GPT определяет задачу и параметры повторения
- Повторяющаяся задача создается в TickTick
- Бот подтверждает создание

**Зависимости**: US-1, US-11

---

### US-11: Установка напоминаний
**Как** пользователь TickTick  
**Я хочу** устанавливать напоминания для задач с указанием времени  
**Чтобы** не забывать о важных задачах

**Приоритет**: Medium  
**Критерии приемки**:
- Пользователь указывает задачу и время напоминания
- GPT определяет задачу и время
- Напоминание устанавливается в TickTick
- Бот подтверждает установку напоминания

**Зависимости**: US-1, US-11

---

## Epic 2: Обработка команд

### US-12: Распознавание голосовых сообщений
**Как** пользователь TickTick  
**Я хочу** отправлять голосовые команды боту  
**Чтобы** управлять задачами без набора текста

**Приоритет**: High  
**Критерии приемки**:
- Пользователь отправляет голосовое сообщение
- Бот получает голосовое сообщение через Telegram API
- Голос конвертируется в текст
- Текст передается для дальнейшей обработки

**Зависимости**: US-16 (Telegram Bot API)

---

### US-13: Парсинг команд через GPT
**Как** система  
**Я должна** анализировать команды пользователя через GPT  
**Чтобы** понимать намерения пользователя и выполнять правильные действия

**Приоритет**: High  
**Критерии приемки**:
- Команда пользователя передается в GPT
- GPT анализирует команду и определяет:
  - Тип действия (создание, редактирование, удаление и т.д.)
  - Параметры задачи (название, дата, список, теги и т.д.)
  - Контекст и неявные требования
- GPT формирует структурированный запрос для TickTick API
- Результат передается для выполнения

**Зависимости**: US-17 (OpenAI API), US-17 (n8n)

---

### US-14: Контекстное определение срочности
**Как** система  
**Я должна** анализировать контекст и определять срочность задач  
**Чтобы** автоматически расставлять приоритеты

**Приоритет**: Medium  
**Критерии приемки**:
- GPT получает список задач и цели недели
- GPT анализирует взаимосвязи между задачами и целями
- GPT определяет уровни срочности для каждой задачи
- Результат используется для добавления тегов

**Зависимости**: US-13

---

## Epic 3: Аналитика

### US-15: Аналитика рабочего времени
**Как** пользователь TickTick  
**Я хочу** получать информацию о рабочем времени за период  
**Чтобы** отслеживать продуктивность

**Приоритет**: Medium  
**Критерии приемки**:
- Пользователь запрашивает аналитику рабочего времени за период
- Система анализирует задачи в TickTick за указанный период
- Система подсчитывает рабочее время (разделение на рабочее и личное)
- Бот выводит текстовую сводку (например, "вы на прошлой неделе работали 40 часов")

**Зависимости**: US-15 (TickTick API)

---

### US-16: Анализ и оптимизация расписания
**Как** пользователь TickTick  
**Я хочу** получать предложения по оптимизации расписания  
**Чтобы** улучшить свою продуктивность

**Приоритет**: Low  
**Критерии приемки**:
- Пользователь запрашивает анализ расписания
- Система анализирует текущее расписание и задачи
- GPT предлагает оптимизации на основе данных
- Бот выводит текстовые рекомендации

**Зависимости**: US-15, US-13

---

## Epic 4: Управление конфигурацией

### US-17: Редактирование промпта AI-агента
**Как** администратор  
**Я хочу** редактировать основной промпт AI-агента  
**Чтобы** настраивать поведение бота под свои нужды

**Приоритет**: Low  
**Критерии приемки**:
- Администратор может получить текущий промпт
- Администратор может отредактировать промпт
- Изменения сохраняются и применяются к следующим запросам
- Бот подтверждает изменение промпта

**Зависимости**: US-13, система хранения конфигурации

---

## Epic 5: Интеграции

### US-18: Интеграция с Telegram Bot API
**Как** система  
**Я должна** интегрироваться с Telegram Bot API  
**Чтобы** принимать команды и отправлять ответы пользователям

**Приоритет**: High  
**Критерии приемки**:
- Бот регистрируется в Telegram
- Бот принимает текстовые сообщения
- Бот принимает голосовые сообщения
- Бот отправляет ответы пользователям
- Бот обрабатывает ошибки и отправляет понятные сообщения

---

### US-19: Интеграция с TickTick API
**Как** система  
**Я должна** интегрироваться с TickTick OpenAPI  
**Чтобы** выполнять операции с задачами, списками, тегами

**Приоритет**: High  
**Критерии приемки**:
- Система аутентифицируется в TickTick API
- Система может создавать задачи
- Система может редактировать задачи
- Система может удалять задачи
- Система может работать со списками и тегами
- Система обрабатывает ошибки API

---

### US-20: Интеграция через n8n
**Как** система  
**Я должна** использовать n8n для связи компонентов  
**Чтобы** организовать workflow между Telegram, GPT и TickTick

**Приоритет**: High  
**Критерии приемки**:
- n8n получает сообщения из Telegram
- n8n передает сообщения в GPT
- n8n получает ответ от GPT
- n8n выполняет действия в TickTick API
- n8n отправляет ответ обратно в Telegram
- Обработка ошибок на каждом этапе

---

## Матрица зависимостей User Stories

```
US-12 (Голос) → US-13 (GPT) → US-1/US-2 (Создание задач) → US-19 (TickTick API)
US-13 (GPT) → US-14 (Срочность) → US-8 (Массовые теги)
US-15 (Аналитика) → US-16 (Оптимизация)
US-18 (Telegram) → US-12 (Голос)
US-20 (n8n) → US-18 (Telegram) + US-13 (GPT) + US-19 (TickTick)
```

---

## Приоритизация

### Sprint 1 (MVP)
- US-18, US-19, US-20 (Интеграции)
- US-12, US-13 (Обработка команд)
- US-1, US-2 (Создание задач)
- US-3, US-4 (Редактирование/удаление)

### Sprint 2
- US-5, US-6 (Перенос задач)
- US-7, US-8 (Теги)
- US-9 (Заметки)
- US-10, US-11 (Повторяющиеся задачи и напоминания)

### Sprint 3
- US-15 (Аналитика)
- US-14 (Контекстное определение срочности)
- US-16 (Оптимизация расписания)

### Sprint 4 (Future)
- US-17 (Редактирование промпта)

